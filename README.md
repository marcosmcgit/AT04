# AT04

Implementamos uma calculadora de expressões algébricas que não contenham outras operações além da adição, subtração, multiplicação e divisão em uma abordagem cliente e servidor. Isso foi feito através da alteração dos códigos da calculadora distribuída com uso de sockets entregue na AT01, em Java.

Inicialmente, uma String em um cliente contém a expressão algébrica. Ela será então convertida em uma lista que contém sua representação em notação polonesa reversa. Os elementos dessa lista podem ser números ou operadores (+, -, *, /). A lista é codificada em um formato de intercomunicação (protocol buffer, XML ou YAML) e, então, é enviada a uma determinada porta do servidor via socket.

No servidor (Server.java), com o uso de threads, há uma porta para cada formato de intercomunicação: 9090 para Protocol Buffer, 9091 para XML e 9092 para YAML. O servidor recebe a mensagem, decodifica para a lista que contém a expressão em notação polonesa reversa, e realiza o cálculo com o uso de uma pilha, fazendo chamadas aos métodos soma, subtrai, multiplica e divide da calculadora proveniente da AT01. Feito o cálculo, o resultado é transmitido para cada cliente (CalculadoraClientProtobuffer, CalculadoraClientXML e CalculadoraClientYAML) através do mesmo formato de intercomunicação em que ele recebeu a mensagem com a lista.

O cliente exibe o resultado da expressão e encerra sua execução. O servidor permanece em execução aguardando novos clientes.
Tudo que está no pacote br.ufc.mdcc.AT04.shared é compartilhado entre clientes e servidores. Nele, temos as classes utilizadas para representar os elementos na lista com a notação polonesa (pacote model) e com as classes geradas pelo utilitário protoc do Google para o Protocol Buffer (pacote protobuffer). No pacote br.ufc.mdcc.AT04.server temos o que é exclusivo para o servidor, e em br.ufc.mdcc.AT04.client o que é exclusivo para o cliente. No caso do YAML, utilizamos a biblioteca Jackson e temos as classes Expression.java e Result.java, compartilhadas entre cliente e servidor YAML, no pacote br.ufc.mdcc.AT04.shared.yaml. Tais classes são modelos da expressão e de seu resultado que a referida biblioteca transforma em uma mensagem YAML. No caso do XML, utilizamos o pacote nativo javax.xml.*. Quanto ao Protocol Buffer, utilizamos a biblioteca com.google.protobuf.
